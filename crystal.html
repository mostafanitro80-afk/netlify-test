<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crystal | Hack</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .game-area {
            background: rgba(10, 10, 20, 0.6);
            padding: 10px;
            border-radius: 12px;
            border: 1px solid #333;
            margin: 20px auto;
            max-width: 400px;
            position: relative;
            box-shadow: inset 0 0 30px rgba(0,0,0,0.8);
        }

        .crystal-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }

        .cell {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.2rem;
            transition: 0.3s;
            border: 1px solid transparent;
        }

        /* Ø§Ù„ÙƒØ±ÙŠØ³ØªØ§Ù„Ø§Øª */
        .gem { width: 70%; height: 70%; filter: drop-shadow(0 0 2px rgba(255,255,255,0.3)); transition: 0.4s; opacity: 0.5; }
        
        /* ØªØ£Ø«ÙŠØ± Ø§Ù„Ø§Ø®ØªØ±Ø§Ù‚ (ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒØ±ÙŠØ³ØªØ§Ù„Ø§Øª Ø§Ù„Ø±Ø§Ø¨Ø­Ø©) */
        .cell.hacked {
            background: rgba(0, 255, 65, 0.1);
            border-color: var(--hacker-green);
            box-shadow: 0 0 10px var(--hacker-green);
            transform: scale(1.1);
            z-index: 5;
        }
        .cell.hacked .gem {
            opacity: 1;
            filter: drop-shadow(0 0 8px var(--hacker-green)) brightness(1.5);
            animation: pulseGem 1s infinite alternate;
        }

        @keyframes pulseGem { from { transform: scale(1); } to { transform: scale(1.2); } }

        .back-float {
            position: absolute; top: 20px; left: 20px;
            color: #fff; text-decoration: none;
            background: rgba(255,255,255,0.1); padding: 8px 12px;
            border-radius: 8px; font-size: 0.9rem; transition: 0.3s;
        }
        .back-float:hover { background: var(--danger-red); }

        .info-bar { display: flex; justify-content: space-between; font-size: 0.8rem; color: #888; margin-bottom: 10px; font-family: 'Fira Code'; }
    </style>
</head>
<body>
    
    <div class="live-counter" id="liveCounter">Live: ...</div>
    <a href="app.html" class="back-float">ğŸ”™ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</a>

    <div class="container">
        <img src="11zon_cropped.png" alt="Logo" class="pro-logo" style="width: 100px;">
        
        <h2 style="color: #bc13fe; text-shadow: 0 0 15px #bc13fe;">CRYSTAL HACK</h2>
        
        <div class="info-bar">
            <span>Algorithm: <span style="color:#bc13fe;">DETECTED</span></span>
            <span>Win Chance: 98%</span>
        </div>

        <div class="game-area">
            <div class="crystal-grid" id="grid">
                </div>
        </div>

        <div style="font-family:'Fira Code'; font-size:1.5rem; margin: 15px 0; color:#fff; display:none;" id="resultText">
            Win: <span style="color:gold;">x2.50</span>
        </div>

        <button id="hackBtn" onclick="runHack()" style="background: linear-gradient(135deg, #8e2de2, #4a00e0); box-shadow: 0 5px 15px rgba(138, 43, 226, 0.4);">
            ğŸ”® ÙƒØ´Ù Ø§Ù„ÙƒØ±ÙŠØ³ØªØ§Ù„Ø§Øª
        </button>

        <p style="font-size: 0.75rem; color: #555; margin-top: 15px; font-family: 'Fira Code';">AI PREDICTION MODULE V2.0</p>
    </div>

    <script>
        if (!localStorage.getItem('isLoggedIn')) window.location.href = 'index.html';

        setInterval(() => { document.getElementById('liveCounter').innerText = `Live: ${Math.floor(Math.random() * 50) + 300}`; }, 3000);

        const grid = document.getElementById('grid');
        const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff']; // Ø£Ù„ÙˆØ§Ù† Ø§Ù„ÙƒØ±ÙŠØ³ØªØ§Ù„Ø§Øª
        const gemsSVG = [
            '<svg viewBox="0 0 24 24" class="gem" style="fill:#ff4d4d;"><path d="M12 2L2 12l10 10 10-10L12 2z"/></svg>', // Ù…Ø§Ø³Ø© Ø­Ù…Ø±Ø§Ø¡
            '<svg viewBox="0 0 24 24" class="gem" style="fill:#4dff4d;"><path d="M12 2l-8 4v12l8 4 8-4V6l-8-4z"/></svg>', // Ø³Ø¯Ø§Ø³ÙŠ Ø£Ø®Ø¶Ø±
            '<svg viewBox="0 0 24 24" class="gem" style="fill:#4d4dff;"><circle cx="12" cy="12" r="10"/></svg>', // Ø¯Ø§Ø¦Ø±Ø© Ø²Ø±Ù‚Ø§Ø¡
            '<svg viewBox="0 0 24 24" class="gem" style="fill:#ffff4d;"><path d="M12 2L2 22h20L12 2z"/></svg>' // Ù…Ø«Ù„Ø« Ø£ØµÙØ±
        ];

        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø´Ø¨ÙƒØ© 7x7
        function initGrid() {
            grid.innerHTML = '';
            for(let i=0; i<49; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.innerHTML = gemsSVG[Math.floor(Math.random() * gemsSVG.length)];
                grid.appendChild(cell);
            }
        }

        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound() {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.type = 'sine';
            osc.frequency.setValueAtTime(600, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            osc.start(); osc.stop(audioCtx.currentTime + 0.3);
        }

        function runHack() {
            const btn = document.getElementById('hackBtn');
            btn.disabled = true; btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨...";
            document.getElementById('resultText').style.display = 'none';

            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø´Ø¨ÙƒØ© ÙˆØªØ£Ø«ÙŠØ± Ø¹Ø´ÙˆØ§Ø¦ÙŠ
            initGrid();
            
            let attempts = 0;
            const interval = setInterval(() => {
                initGrid(); // ØªØºÙŠÙŠØ± Ø§Ù„Ø£Ø´ÙƒØ§Ù„ Ø¨Ø³Ø±Ø¹Ø©
                attempts++;
                if(attempts > 5) {
                    clearInterval(interval);
                    showResult();
                }
            }, 200);
        }

        function showResult() {
            const cells = document.querySelectorAll('.cell');
            
            // Ø§Ø®ØªÙŠØ§Ø± 5 Ø®Ù„Ø§ÙŠØ§ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù…ØªØ¬Ø§ÙˆØ±Ø© (Ù…Ø­Ø§ÙƒØ§Ø© Ù„Ù„ÙÙˆØ²) Ù„Ø¹Ù…Ù„ Ù‡Ø§ÙŠÙ„Ø§ÙŠØª
            const startIdx = Math.floor(Math.random() * 40); 
            const winningIndices = [startIdx, startIdx+1, startIdx+7, startIdx+8]; // Ø´ÙƒÙ„ Ù…Ø±Ø¨Ø¹ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹
            
            winningIndices.forEach((idx, i) => {
                if(cells[idx]) {
                    setTimeout(() => {
                        cells[idx].classList.add('hacked');
                        playSound();
                    }, i * 200);
                }
            });

            document.getElementById('hackBtn').innerText = "ğŸ”® ÙƒØ´Ù Ø§Ù„ÙƒØ±ÙŠØ³ØªØ§Ù„Ø§Øª";
            document.getElementById('hackBtn').disabled = false;
            
            // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø¨Ø­ ÙˆÙ‡Ù…ÙŠ
            const fakeWin = (Math.random() * 3 + 1.2).toFixed(2);
            const resTxt = document.getElementById('resultText');
            resTxt.innerHTML = `Win: <span style="color:gold;">x${fakeWin}</span>`;
            resTxt.style.display = 'block';
        }

        initGrid();
    </script>
</body>
</html>
